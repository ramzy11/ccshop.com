<?xml version="1.0"?>
<!--
/**
 * Magestore
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magestore.com license that is
 * available through the world-wide-web at this URL:
 * http://www.magestore.com/license-agreement.html
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magestore
 * @package     Magestore_Promotionalgift
 * @copyright   Copyright (c) 2012 Magestore (http://www.magestore.com/)
 * @license     http://www.magestore.com/license-agreement.html
 */
-->
<config>
    <modules>
        <Magestore_Promotionalgift>
            <version>0.1.0</version>
        </Magestore_Promotionalgift>
    </modules>
    <frontend>
        <routers>
            <promotionalgift>
                <use>standard</use>
                <args>
                    <module>Magestore_Promotionalgift</module>
                    <frontName>promotionalgift</frontName>
                </args>
            </promotionalgift>
        </routers>
        <layout>
            <updates>
                <promotionalgift>
                    <file>promotionalgift.xml</file>
                </promotionalgift>
            </updates>
        </layout>
        <translate>
            <modules>
                <Magestore_Promotionalgift>
                    <files>
                        <default>Magestore_Promotionalgift.csv</default>
                    </files>
                </Magestore_Promotionalgift>
            </modules>
        </translate>
		<events>
			<controller_action_predispatch_checkout_cart_couponPost>
				<observers>
					<promotionalgift_observer>
						<type>singleton</type>
        				<class>promotionalgift/observer</class>
        				<method>couponPostAction</method>
					</promotionalgift_observer>
				</observers>
			</controller_action_predispatch_checkout_cart_couponPost>
			<controller_action_postdispatch>
                <observers>
                    <promotionalgift_observers>
                        <type>singleton</type>
                        <class>promotionalgift/observer</class>
                        <method>controllerActionPostdispatch</method>
                    </promotionalgift_observers>
                </observers>
            </controller_action_postdispatch>
			<checkout_onepage_controller_success_action>
                <observers>
                    <promotionalgift_observers>
                        <type>singleton</type>
                        <class>promotionalgift/observer</class>
                        <method>checkoutOnepageControllerSuccessAction</method>
                    </promotionalgift_observers>
                </observers>
            </checkout_onepage_controller_success_action>

			<!-- Edit ajax cart -->
			<controller_action_predispatch_checkout_cart_configure>
                <observers>
                    <promotionalgift_observers>
                        <type>singleton</type>
                        <class>promotionalgift/observer</class>
                        <method>checkoutCartConfigure</method>
                    </promotionalgift_observers>
                </observers>
            </controller_action_predispatch_checkout_cart_configure>
			<controller_action_predispatch_checkout_cart_updatePost>
                <observers>
                    <promotionalgift_observers>
                        <type>singleton</type>
                        <class>promotionalgift/observer</class>
                        <method>checkoutCartUpdatePost</method>
                    </promotionalgift_observers>
                </observers>
            </controller_action_predispatch_checkout_cart_updatePost>
			<controller_action_predispatch_checkout_cart_updateItemOptions>
                <observers>
                    <promotionalgift_observers>
                        <type>singleton</type>
                        <class>promotionalgift/observer</class>
                        <method>checkoutCartUpdateItemOptions</method>
                    </promotionalgift_observers>
                </observers>
            </controller_action_predispatch_checkout_cart_updateItemOptions>
		</events>
    </frontend>
    <admin>
        <routers>
            <promotionalgiftadmin>
                <use>admin</use>
                <args>
                    <module>Magestore_Promotionalgift</module>
                    <frontName>promotionalgiftadmin</frontName>
                </args>
            </promotionalgiftadmin>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <promotionalgift>
                    <file>promotionalgift.xml</file>
                </promotionalgift>
            </updates>
        </layout>
        <translate>
            <modules>
                <Magestore_Promotionalgift>
                    <files>
                        <default>Magestore_Promotionalgift.csv</default>
                    </files>
                </Magestore_Promotionalgift>
            </modules>
        </translate>
    </adminhtml>
    <global>
        <models>
            <promotionalgift>
                <class>Magestore_Promotionalgift_Model</class>
                <resourceModel>promotionalgift_mysql4</resourceModel>
            </promotionalgift>
            <promotionalgift_mysql4>
                <class>Magestore_Promotionalgift_Model_Mysql4</class>
                <entities>
                    <catalogrule>
                        <table>promotionalgift_catalog_rule</table>
                    </catalogrule>
					<shoppingcartrule>
                        <table>promotionalgift_shopping_cart_rule</table>
                    </shoppingcartrule>
					<sale>
                        <table>promotionalgift_sale</table>
                    </sale>
					<catalogitem>
                        <table>promotionalgift_catalog_item</table>
                    </catalogitem>
					<shoppingcartitem>
                        <table>promotionalgift_shopping_cart_item</table>
                    </shoppingcartitem>
					<quote>
                        <table>promotionalgift_quote</table>
                    </quote>
					<shoppingquote>
                        <table>promotionalgift_shopping_cart_quote</table>
                    </shoppingquote>
                </entities>
            </promotionalgift_mysql4>
			<checkout>
				<rewrite>
					<cart>Magestore_Promotionalgift_Model_Checkout_Cart</cart>
				</rewrite>
			</checkout>
        </models>
        <resources>
            <promotionalgift_setup>
                <setup>
                    <module>Magestore_Promotionalgift</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </promotionalgift_setup>
            <promotionalgift_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </promotionalgift_write>
            <promotionalgift_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </promotionalgift_read>
        </resources>
        <blocks>
            <promotionalgift>
                <class>Magestore_Promotionalgift_Block</class>
            </promotionalgift>
			<checkout>
				<rewrite>
					<cart_coupon>Magestore_Promotionalgift_Block_Cart_Coupon</cart_coupon>
				</rewrite>
			</checkout>
        </blocks>
        <helpers>
            <promotionalgift>
                <class>Magestore_Promotionalgift_Helper</class>
            </promotionalgift>
        </helpers>
        <!-- <events>
            <controller_action_predispatch>
                <observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>controllerActionPredispatch</method>
                    </promotionalgift_observers>
                </observers>
            </controller_action_predispatch>
        </events> -->
		<events>
			<!--<catalog_product_get_final_price>-->
				<!--<observers>-->
                    <!--<promotionalgift_observers>-->
                        <!--<class>promotionalgift/observer</class>-->
                        <!--<method>catalogProductGetFinalPrice</method>-->
                    <!--</promotionalgift_observers>-->
                <!--</observers>-->
			<!--</catalog_product_get_final_price>-->
			<controller_action_predispatch_checkout_cart_delete>
				<observers>
					<ajaxcart_observers>
						<type>singleton</type>
        				<class>promotionalgift/observer</class>
        				<method>checkoutCartDelete</method>
					</ajaxcart_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_delete>
			<checkout_cart_product_add_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>checkoutCartProductAddAfter</method>
                    </promotionalgift_observers>
                </observers>
			</checkout_cart_product_add_after>
			<sales_quote_product_add_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>salesQuoteProductAddAfter</method>
                    </promotionalgift_observers>
                </observers>
			</sales_quote_product_add_after>
			<catalog_product_type_prepare_full_options>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>catalogProductTypePrepareFullOptions</method>
                    </promotionalgift_observers>
                </observers>
			</catalog_product_type_prepare_full_options>
			<catalog_product_type_prepare_lite_options>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>catalogProductTypePrepareLiteOptions</method>
                    </promotionalgift_observers>
                </observers>
			</catalog_product_type_prepare_lite_options>
			<sales_quote_item_save_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>salesQuoteItemSaveAfter</method>
                    </promotionalgift_observers>
                </observers>
			</sales_quote_item_save_after>

			<!-- <sales_quote_save_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>salesQuoteSaveAfter</method>
                    </promotionalgift_observers>
                </observers>
			</sales_quote_save_after>  -->

			<sales_order_place_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>salesOrderPlaceAfter</method>
                    </promotionalgift_observers>
                </observers>
			</sales_order_place_after>
			<sales_order_save_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>salesOrderSaveAfter</method>
                    </promotionalgift_observers>
                </observers>
			</sales_order_save_after>
			<!-- <checkout_cart_update_items_before>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>checkoutCartUpdateItemsBefore</method>
                    </promotionalgift_observers>
                </observers>
			</checkout_cart_update_items_before>
			<checkout_cart_update_items_after>
				<observers>
                    <promotionalgift_observers>
                        <class>promotionalgift/observer</class>
                        <method>checkoutCartUpdateItemsAfter</method>
                    </promotionalgift_observers>
                </observers>
			</checkout_cart_update_items_after> -->
		</events>
    </global>
	<default>
		<promotionalgift>
			<general>
				<enable>1</enable>
				<showfreegift>cart</showfreegift>
				<showgiftlabel>1</showgiftlabel>
				<giftlabel>default/freegift.png</giftlabel>
				<showfreegiftoncat>1</showfreegiftoncat>
			</general>
		</promotionalgift>
	</default>
</config>
